{"version":3,"file":"zx-editor.min.js","sources":["zx-editor.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.unknown = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.ZxEditor = void 0;\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\n  function _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n  /*!\n   * zx-editor v3.1.0\n   * https://github.com/capricorncd/zx-editor\n   * Released under the MIT License\n   * Released on: Sun May 08 2022 17:06:00 GMT+0900 (Japan Standard Time)\n   * Copyright © 2018-present, capricorncd\n   */\n\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 14:47:02 (GMT+0900)\n   */\n\n  /**\n   * to snake case\n   * helloWorld => hello-world\n   * helloWorld => hello_world\n   * helloWorld => hello world\n   * @param str\n   * @param connectSymbol word connect symbol\n   */\n  var toSnakeCase = function toSnakeCase(str) {\n    var connectSymbol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return str.replace(/[A-Z]/g, function (s) {\n      return \"\".concat(connectSymbol).concat(s.toLowerCase());\n    });\n  };\n  /**\n   * to camel case\n   * hello_world => helloWorld\n   * hello-world => helloWorld\n   * hello world => helloWorld\n   * @param str\n   */\n  // export const toCamelCase = (str: string): string => {\n  //   return str.replace(/[-_\\s](\\w)/g, (_, s) => s.toUpperCase())\n  // }\n\n\n  var slice = function slice(arrLike) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return Array.prototype.slice.call(arrLike, offset);\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 11:55:07 (GMT+0900)\n   */\n\n\n  var CLASS_NAME_EDITOR = 'zx-editor';\n  var CLASS_NAME_CONTENT = 'zx-editor-content-wrapper';\n  var DEF_OPTIONS = {\n    // 内容是否可以被编辑\n    editable: true,\n    // 编辑器输入内容绝对定位\n    // fixed: false,\n    // editor min height\n    minHeight: '50vh',\n    // style\n    placeholder: 'Enter...',\n    placeholderColor: '',\n    lineHeight: 1.5,\n    // paragraph tail spacing, default 10px\n    // paragraphTailSpacing: '',\n    caretColor: '',\n    textColor: '',\n    // iphone会自动移动，难控制\n    // 光标所在行距页面顶部的距离30px\n    cursorOffsetTop: 30,\n    // 自定义粘贴处理函数\n    customPasteHandler: undefined,\n\n    /**\n     * ******************************\n     * toolbar options\n     * ******************************\n     */\n    // Has the toolbar been fixed?\n    toolbarBeenFixed: true,\n    toolbarHeight: 50,\n    // buttons name, and order\n    toolbarButtons: ['select-picture', 'text-style'],\n\n    /**\n     * ******************************\n     * image options\n     * ******************************\n     */\n    // customize Picture Handler\n    // customPictureHandler: undefined,\n    // image max width\n    imageMaxWidth: 720,\n    // image max size, unit Kib, default 20M\n    imageMaxSize: 20480,\n    // template\n    imageSectionTemp: \"<section class=\\\"child-is-picture\\\"><img src=\\\"{url}\\\" loading=\\\"lazy\\\"></section>\",\n    // GIF pictures are not processed\n    ignoreGif: true,\n    // Force the width/height of the picture, even if the width/height of the picture\n    // is smaller than the target width/height\n    forceImageResize: false,\n\n    /**\n     * ******************************\n     * text style options\n     * ******************************\n     */\n    // text style, value ['#333', '#f00', ...]\n    // textStyleColors: undefined,\n    textStyleTitle: 'Set Style',\n    textStyleHeadLeftBtnText: 'Clear style',\n    textStyleHeadAlign: 'center',\n\n    /**\n     * ******************************\n     * color options\n     * ******************************\n     */\n    mainColor: '',\n    // border color\n    borderColor: ''\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:32:12 (GMT+0900)\n   */\n\n  var NODE_NAME_SECTION = 'SECTION';\n  var NODE_NAME_BR = 'BR';\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:55:25 (GMT+0900)\n   */\n\n  var REPLACE_NODE_LIST = ['DIV', 'P', 'ARTICLE', 'ASIDE', 'DETAILS', // 'SUMMARY',\n  'FOOTER', 'HEADER', 'MAIN', 'NAV'];\n\n  var $ = function $(selector) {\n    var doc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n    if (selector instanceof HTMLElement) return selector;\n    return doc.querySelector(selector);\n  }; // export const $$ = <T extends HTMLElement>(selector: string, doc: Document | HTMLElement = document): T[] => {\n  //   return Array.prototype.slice.call(doc.querySelectorAll(selector), 0)\n  // }\n\n\n  var createElement = function createElement(tag) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var innerHTML = arguments.length > 2 ? arguments[2] : undefined;\n    var el = document.createElement(tag);\n\n    for (var _i = 0, _Object$entries = Object.entries(attrs); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          key = _Object$entries$_i[0],\n          val = _Object$entries$_i[1];\n\n      el.setAttribute(key, val);\n    }\n\n    if (innerHTML) el.innerHTML = innerHTML;\n    return el;\n  };\n\n  var createStyles = function createStyles(data) {\n    var arr = [];\n\n    for (var _i2 = 0, _Object$entries2 = Object.entries(data); _i2 < _Object$entries2.length; _i2++) {\n      var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n          key = _Object$entries2$_i[0],\n          value = _Object$entries2$_i[1];\n\n      arr.push(\"\".concat(toSnakeCase(key), \":\").concat(value));\n    }\n\n    return arr.join(';');\n  };\n\n  var replace = function replace(input, oldNodeName, newNodeName) {\n    return input.replace(RegExp(\"(^<\" + oldNodeName + \")|(\" + oldNodeName + \">$)\", \"gi\"), function (match) {\n      return match.toUpperCase().replace(oldNodeName, newNodeName.toLowerCase());\n    });\n  };\n  /**\n   *\n   * @param input\n   * @param tagName\n   */\n\n\n  var changeNodeName = function changeNodeName(input) {\n    var tagName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : NODE_NAME_SECTION;\n    var oldNodeName = input.nodeName;\n    var newNodeName = tagName.toUpperCase();\n    if (oldNodeName === newNodeName) return input;\n    var el = createElement(tagName);\n    var parent = input.parentElement;\n\n    if (REPLACE_NODE_LIST.includes(oldNodeName)) {\n      el.innerHTML = replace(input.outerHTML, oldNodeName, newNodeName);\n      parent === null || parent === void 0 ? void 0 : parent.replaceChild(el.firstChild, input);\n      return el.firstChild;\n    }\n\n    el.append(input.cloneNode(true));\n    parent === null || parent === void 0 ? void 0 : parent.replaceChild(el, input);\n    return el;\n  };\n  /**\n   * is <br> section\n   * <section><br></section>\n   * @param el\n   */\n\n\n  var isBrSection = function isBrSection(el) {\n    if (!el) return false;\n    var nodes = slice(el.childNodes);\n    return nodes.length === 1 && nodes[0].nodeName === 'BR';\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/07 10:33:02 (GMT+0900)\n   */\n\n\n  var CursorClass = /*#__PURE__*/function () {\n    function CursorClass(rootElement) {\n      _classCallCheck(this, CursorClass);\n\n      _defineProperty(this, \"rootElement\", void 0);\n\n      _defineProperty(this, \"selection\", void 0);\n\n      _defineProperty(this, \"range\", void 0);\n\n      _defineProperty(this, \"timer\", void 0);\n\n      this.rootElement = rootElement;\n      this.selection = window.getSelection();\n      this.range = this.selection ? this.selection.getRangeAt(0) : new Range();\n      this.timer = null; // init range\n\n      var el = rootElement.lastElementChild;\n\n      if (el) {\n        var _el$textContent;\n\n        this.setRange(el, (_el$textContent = el.textContent) === null || _el$textContent === void 0 ? void 0 : _el$textContent.length);\n      }\n    }\n\n    _createClass(CursorClass, [{\n      key: \"setRange\",\n      value: function setRange(el) {\n        var _this = this;\n\n        var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        // remove all range object\n        if (this.selection) this.selection.removeAllRanges(); // el: '<section>inner text.</section>'\n\n        var targetNode = el.childNodes[el.childNodes.length - 1] || el; // check img/video/audio\n        // console.log(targetNode.nodeName, this.offset)\n\n        if (/IMG|VIDEO|AUDIO/.test(targetNode.nodeName)) {\n          offset = 1; // get parentNode, can't set offset = 1 of IMG node.\n\n          targetNode = targetNode.parentNode;\n        }\n\n        this.range.setStart(targetNode, offset); // cursor start and end position is collapse\n\n        this.range.collapse(true);\n\n        this._clearTimeout(); // 延时执行，键盘自动收起后再触发focus\n\n\n        this.timer = setTimeout(function () {\n          var _this$selection;\n\n          // 插入新的光标对象\n          (_this$selection = _this.selection) === null || _this$selection === void 0 ? void 0 : _this$selection.addRange(_this.range);\n        }, 100);\n      }\n    }, {\n      key: \"_clearTimeout\",\n      value: function _clearTimeout() {\n        if (this.timer) {\n          clearTimeout(this.timer);\n          this.timer = null;\n        }\n      }\n    }, {\n      key: \"getCurrentNode\",\n      value: function getCurrentNode() {\n        this.range = this.selection ? this.selection.getRangeAt(0) : new Range();\n        var currentNode = this.range.endContainer;\n\n        while (this.rootElement !== currentNode) {\n          if (currentNode.parentElement === this.rootElement) {\n            return currentNode;\n          } else {\n            currentNode = currentNode.parentNode;\n          }\n        }\n\n        return this.rootElement.lastElementChild;\n      }\n    }]);\n\n    return CursorClass;\n  }();\n\n  var EventEmitter = /*#__PURE__*/function () {\n    function EventEmitter() {\n      _classCallCheck(this, EventEmitter);\n\n      _defineProperty(this, \"eventList\", void 0);\n\n      this.eventList = {};\n    }\n    /**\n     * on\n     * @param eventName\n     * @param fn\n     */\n\n\n    _createClass(EventEmitter, [{\n      key: \"on\",\n      value: function on(eventName, fn) {\n        if (!eventName || !fn || typeof fn !== 'function') return;\n\n        if (!this.eventList[eventName]) {\n          this.eventList[eventName] = [];\n        }\n\n        this.eventList[eventName].push(fn);\n      }\n      /**\n       * emit\n       * @param eventName\n       * @param args\n       */\n\n    }, {\n      key: \"emit\",\n      value: function emit(eventName) {\n        var fnList = this.eventList[eventName];\n        if (!fnList) return;\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        for (var i = 0; i < fnList.length; i++) {\n          try {\n            fnList[i].apply(null, args);\n          } catch (e) {\n            this.emit('error', e, 'emit');\n          }\n        }\n      }\n      /**\n       * off\n       * @param eventName\n       * @param fn\n       */\n\n    }, {\n      key: \"off\",\n      value: function off(eventName, fn) {\n        if (!this.eventList[eventName]) return;\n        var eventList = this.eventList[eventName];\n\n        if (typeof fn === 'function') {\n          var index = eventList.findIndex(function (item) {\n            return item === fn;\n          });\n          if (index >= 0) eventList.splice(index, 1);\n        } else {\n          this.eventList[eventName].length = 0;\n        }\n\n        this._removeEmpty(eventName);\n      }\n      /**\n       * remove empty event list\n       * @param eventName\n       * @private\n       */\n\n    }, {\n      key: \"_removeEmpty\",\n      value: function _removeEmpty(eventName) {\n        if (!this.eventList[eventName].length) {\n          delete this.eventList[eventName];\n        }\n      }\n    }, {\n      key: \"destroyEventEmitter\",\n      value: function destroyEventEmitter() {\n        var _this2 = this;\n\n        Object.keys(this.eventList).forEach(function (key) {\n          return _this2.off(key);\n        });\n      }\n    }]);\n\n    return EventEmitter;\n  }();\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 11:07:32 (GMT+0900)\n   */\n\n  /**\n   * init editor dom\n   */\n\n\n  var initEditorDom = function initEditorDom() {\n    var el = createElement('div', {\n      \"class\": CLASS_NAME_EDITOR\n    });\n    return el;\n  };\n  /**\n   * init content dom\n   * @param options\n   */\n\n\n  var initContentDom = function initContentDom(options) {\n    var contentStyles = _objectSpread({\n      lineHeight: options.lineHeight,\n      minHeight: options.minHeight,\n      position: 'relative',\n      overflowY: 'scroll',\n      outline: 'none'\n    }, options.styles);\n\n    if (options.caretColor) contentStyles.caretColor = options.caretColor;\n    if (options.textColor) contentStyles.color = options.textColor;\n    var contentAttrs = {\n      \"class\": \"\".concat(CLASS_NAME_CONTENT, \" is-empty\"),\n      style: createStyles(contentStyles)\n    };\n    if (options.editable) contentAttrs.contenteditable = 'true';\n    var el = createElement('div', contentAttrs);\n    el.innerHTML = \"<section><br></section>\"; // return\n\n    return el;\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:29:43 (GMT+0900)\n   */\n\n\n  var ZxEditor = /*#__PURE__*/function (_EventEmitter) {\n    _inherits(ZxEditor, _EventEmitter);\n\n    var _super = _createSuper(ZxEditor);\n\n    function ZxEditor(selector, options) {\n      var _this3;\n\n      _classCallCheck(this, ZxEditor);\n\n      _this3 = _super.call(this);\n\n      _defineProperty(_assertThisInitialized(_this3), \"$wrapper\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"version\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"options\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"$editor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"$content\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"cursor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this3), \"_contentEvent\", void 0);\n\n      if (!(_assertThisInitialized(_this3) instanceof ZxEditor)) {\n        throw new Error('ZxEditor is a constructor and should be called with the `new` keyword');\n      }\n      /**\n       * ***************************************************\n       * check selector\n       * ***************************************************\n       */\n\n\n      var container = $(selector);\n\n      if (!container) {\n        throw new Error(\"Can't found '\".concat(selector, \"' Node in document!\"));\n      }\n\n      _this3.$wrapper = container; // version\n\n      _this3.version = '3.1.0';\n      console.log(_this3.version);\n      _this3.options = _objectSpread(_objectSpread({}, DEF_OPTIONS), options);\n      _this3.$content = initContentDom(_this3.options);\n      _this3.$editor = initEditorDom();\n\n      _this3.$editor.append(_this3.$content);\n\n      _this3.$wrapper.append(_this3.$editor);\n\n      _this3.$content.focus();\n\n      _this3.cursor = new CursorClass(_this3.$content);\n\n      _this3._contentEvent = function (e) {\n        var type = e.type;\n        if (type === 'blur') _this3._lastLine();\n\n        _this3.emit(type === 'input' ? 'change' : type, e);\n      };\n\n      _this3._initEvents();\n\n      return _this3;\n    }\n\n    _createClass(ZxEditor, [{\n      key: \"_initEvents\",\n      value: function _initEvents() {\n        this.$content.addEventListener('focus', this._contentEvent);\n        this.$content.addEventListener('blur', this._contentEvent);\n        this.$content.addEventListener('input', this._contentEvent);\n      }\n      /**\n       * use\n       * @param plugin\n       */\n\n    }, {\n      key: \"use\",\n      value: function use(plugin) {\n        if (typeof plugin.install === 'function') {\n          plugin.install(this);\n        }\n      }\n      /**\n       * plugin\n       * @param fn\n       */\n\n    }, {\n      key: \"plugin\",\n      value: function plugin(fn) {\n        if (typeof fn === 'function') fn.call(this);\n      }\n    }, {\n      key: \"setHtml\",\n      value: function setHtml(html) {\n        this.$content.innerHTML = '';\n        this.insert(html);\n\n        this._lastLine();\n      }\n    }, {\n      key: \"getHtml\",\n      value: function getHtml() {\n        return this.$content.innerHTML.replace(/<section><br><\\/section>$/, '');\n      }\n      /**\n       * Node.nodeType\n       * ELEMENT_NODE  1\n       * ATTRIBUTE_NODE  2\n       * TEXT_NODE  3\n       * CDATA_SECTION_NODE  4\n       * PROCESSING_INSTRUCTION_NODE  7\n       * COMMENT_NODE  8\n       * DOCUMENT_NODE  9\n       * DOCUMENT_TYPE_NODE  10\n       * DOCUMENT_FRAGMENT_NODE  11\n       * @param input\n       */\n\n    }, {\n      key: \"insert\",\n      value: function insert(input) {\n        var _this4 = this;\n\n        if (input instanceof HTMLElement) {\n          this._insert(input);\n        } else {\n          var el = createElement('div');\n          el.innerHTML = input;\n          slice(el.childNodes).forEach(function (node) {\n            if (node.nodeType === Node.ELEMENT_NODE) {\n              if (node.nodeName === NODE_NAME_BR) {\n                _this4._insert(createElement(NODE_NAME_SECTION, {}, '<br/>'));\n              } else {\n                _this4._insert(node);\n              }\n            } else if (node.textContent) {\n              _this4._insert(createElement(NODE_NAME_SECTION, {}, node.textContent));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_insert\",\n      value: function _insert(input) {\n        console.log(input);\n        var currentSection = this.cursor.getCurrentNode();\n\n        if (currentSection) {\n          if (isBrSection(currentSection)) {\n            this.$content.insertBefore(input, currentSection);\n          } else {\n            this.$content.insertBefore(input, currentSection.nextElementSibling);\n          }\n        } else {\n          this.$content.append(input);\n        }\n\n        changeNodeName(input, NODE_NAME_SECTION);\n      }\n    }, {\n      key: \"_lastLine\",\n      value: function _lastLine() {\n        if (!isBrSection(this.$content.lastElementChild)) {\n          this.$content.appendChild(createElement('section', {}, '<br>'));\n        }\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.$content.removeEventListener('focus', this._contentEvent);\n        this.$content.removeEventListener('blur', this._contentEvent);\n        this.$content.removeEventListener('input', this._contentEvent);\n        this.destroyEventEmitter();\n      }\n    }]);\n\n    return ZxEditor;\n  }(EventEmitter);\n\n  _exports.ZxEditor = ZxEditor;\n});\n//# sourceMappingURL=zx-editor.js.map\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","define","amd","exports","mod","unknown","globalThis","self","this","_exports","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","call","e","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","arguments","apply","_possibleConstructorReturn","TypeError","_assertThisInitialized","ReferenceError","getPrototypeOf","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","err","_iterableToArrayLimit","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","ZxEditor","toSnakeCase","str","connectSymbol","undefined","replace","s","concat","toLowerCase","arrLike","offset","DEF_OPTIONS","editable","minHeight","placeholder","placeholderColor","lineHeight","caretColor","textColor","cursorOffsetTop","customPasteHandler","toolbarBeenFixed","toolbarHeight","toolbarButtons","imageMaxWidth","imageMaxSize","imageSectionTemp","ignoreGif","forceImageResize","textStyleTitle","textStyleHeadLeftBtnText","textStyleHeadAlign","mainColor","borderColor","NODE_NAME_SECTION","REPLACE_NODE_LIST","createElement","tag","attrs","innerHTML","el","document","_Object$entries","entries","_Object$entries$_i","val","setAttribute","createStyles","data","_i2","_Object$entries2","_Object$entries2$_i","join","input","oldNodeName","newNodeName","RegExp","match","toUpperCase","isBrSection","nodes","childNodes","nodeName","CursorClass","rootElement","selection","window","getSelection","range","getRangeAt","Range","timer","_el$textContent","lastElementChild","setRange","textContent","_this","removeAllRanges","targetNode","parentNode","setStart","collapse","_clearTimeout","setTimeout","_this$selection","addRange","clearTimeout","currentNode","endContainer","parentElement","EventEmitter","eventList","eventName","fn","fnList","_len","args","_key","emit","index","findIndex","item","splice","_removeEmpty","_this2","off","_EventEmitter","subClass","superClass","create","_inherits","_super","selector","options","_this3","Error","container","doc","HTMLElement","querySelector","$","$wrapper","version","console","log","$content","contentStyles","position","overflowY","outline","styles","color","contentAttrs","class","style","contenteditable","initContentDom","$editor","append","focus","cursor","_contentEvent","type","_lastLine","_initEvents","addEventListener","plugin","install","html","insert","_this4","_insert","node","nodeType","Node","ELEMENT_NODE","currentSection","getCurrentNode","insertBefore","nextElementSibling","tagName","parent","includes","outerHTML","replaceChild","firstChild","cloneNode","changeNodeName","appendChild","removeEventListener","destroyEventEmitter"],"mappings":"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"}