{"version":3,"file":"zx-editor.min.js","sources":["zx-editor.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.unknown = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.ZxEditor = void 0;\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n  function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\n  function _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\n  function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\n  function _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n  /*!\n   * zx-editor v3.1.0\n   * https://github.com/capricorncd/zx-editor\n   * Released under the MIT License\n   * Released on: Sat May 14 2022 11:56:12 GMT+0900 (Japan Standard Time)\n   * Copyright © 2018-present, capricorncd\n   */\n\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 14:47:02 (GMT+0900)\n   */\n\n  /**\n   * to snake case\n   * helloWorld => hello-world\n   * helloWorld => hello_world\n   * helloWorld => hello world\n   * @param str\n   * @param connectSymbol word connect symbol\n   */\n  var toSnakeCase = function toSnakeCase(str) {\n    var connectSymbol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return str.replace(/[A-Z]/g, function (s) {\n      return \"\".concat(connectSymbol).concat(s.toLowerCase());\n    });\n  };\n  /**\n   * to camel case\n   * hello_world => helloWorld\n   * hello-world => helloWorld\n   * hello world => helloWorld\n   * @param str\n   */\n\n\n  var toCamelCase = function toCamelCase(str) {\n    return str.replace(/[-_\\s](\\w)/g, function (_, s) {\n      return s.toUpperCase();\n    });\n  };\n\n  var slice = function slice(arrLike) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return Array.prototype.slice.call(arrLike, offset);\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:55:25 (GMT+0900)\n   */\n\n\n  var $ = function $(selector) {\n    var doc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n    if (selector instanceof HTMLElement) return selector;\n    return doc.querySelector(selector);\n  }; // export const $$ = <T extends HTMLElement>(selector: string, doc: Document | HTMLElement = document): T[] => {\n  //   return Array.prototype.slice.call(doc.querySelectorAll(selector), 0)\n  // }\n\n\n  var createElement = function createElement(tag) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var innerHTML = arguments.length > 2 ? arguments[2] : undefined;\n    var el = document.createElement(tag);\n\n    for (var _i = 0, _Object$entries = Object.entries(attrs); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          key = _Object$entries$_i[0],\n          val = _Object$entries$_i[1];\n\n      el.setAttribute(key, val);\n    }\n\n    if (innerHTML) el.innerHTML = innerHTML;\n    return el;\n  };\n  /**\n   * 将样式对象转换为字符串\n   * {color: 'red', fontSize: '16px'} => 'color:red;font-size:16px'\n   * @param data\n   * @param extendStyles\n   */\n\n\n  var createStyles = function createStyles(data, extendStyles) {\n    if (extendStyles) {\n      // 防止extendStyles存在snake的属性，不能成功覆盖旧样式\n      // data['lineHeight'] = 1.5, extendStyles['line-height'] = ''\n      for (var _i2 = 0, _Object$entries2 = Object.entries(extendStyles); _i2 < _Object$entries2.length; _i2++) {\n        var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n            key = _Object$entries2$_i[0],\n            value = _Object$entries2$_i[1];\n\n        data[toCamelCase(key)] = value;\n      }\n    }\n\n    var arr = [];\n\n    for (var _i3 = 0, _Object$entries3 = Object.entries(data); _i3 < _Object$entries3.length; _i3++) {\n      var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i3], 2),\n          _key = _Object$entries3$_i[0],\n          _value = _Object$entries3$_i[1];\n\n      if (_value === '' || typeof _value === 'undefined' || _value === null) continue;\n      arr.push(\"\".concat(toSnakeCase(_key), \":\").concat(_value));\n    }\n\n    return arr.join(';');\n  };\n\n  var replaceHtmlTag = function replaceHtmlTag(input, oldNodeName, newNodeName) {\n    return input.replace(RegExp('(^<' + oldNodeName + ')|(' + oldNodeName + '>$)', 'gi'), function (match) {\n      return match.toUpperCase().replace(oldNodeName, newNodeName.toLowerCase());\n    });\n  };\n\n  var isUlElement = function isUlElement(el) {\n    return /UL|OL/.test(el.nodeName);\n  };\n  /**\n   * is <br> section\n   * <section><br></section>\n   * @param el\n   */\n\n\n  var isBrSection = function isBrSection(el) {\n    if (!el) return false;\n    var nodes = slice(el.childNodes);\n    return nodes.length === 1 && nodes[0].nodeName === 'BR';\n  };\n  /**\n   * 获取元素styles对象\n   * @param el\n   */\n\n\n  var _getStyles = function getStyles(el) {\n    if (!el) return {};\n    var style = el.getAttribute('style') || '';\n    return style.split(/\\s?;\\s?/).reduce(function (prev, s) {\n      var _s$split = s.split(/\\s?:\\s?/),\n          _s$split2 = _slicedToArray(_s$split, 2),\n          key = _s$split2[0],\n          val = _s$split2[1];\n\n      prev[toCamelCase(key)] = val;\n      return prev;\n    }, {});\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 11:55:07 (GMT+0900)\n   */\n\n\n  var CLASS_NAME_EDITOR = 'zx-editor';\n  var CLASS_NAME_CONTENT = \"\".concat(CLASS_NAME_EDITOR, \"__content-wrapper\");\n  var ALLOWED_NODE_NAMES = ['SECTION', 'H1', 'H2', 'H3', 'H4', 'H5', 'BLOCKQUOTE', 'UL', 'OL'];\n  var REPLACE_NODE_LIST = ['DIV', 'P', 'ARTICLE', 'ASIDE', 'DETAILS', 'SUMMARY', 'FOOTER', 'HEADER', 'MAIN', 'NAV', 'SECTION', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'BLOCKQUOTE'];\n  var DEF_OPTIONS = {\n    // 内容是否可以被编辑\n    editable: true,\n    // 编辑器输入内容绝对定位\n    // fixed: false,\n    // editor min height\n    minHeight: '50vh',\n    // style\n    placeholder: 'Enter...',\n    placeholderColor: '',\n    lineHeight: 1.5,\n    allowedNodeNames: ALLOWED_NODE_NAMES,\n    // paragraph tail spacing, default 10px\n    // paragraphTailSpacing: '',\n    caretColor: '',\n    textColor: '',\n    // iphone会自动移动，难控制\n    // 光标所在行距页面顶部的距离30px\n    cursorOffsetTop: 30,\n    // 自定义粘贴处理函数\n    customPasteHandler: undefined,\n\n    /**\n     * ******************************\n     * toolbar options\n     * ******************************\n     */\n    // Has the toolbar been fixed?\n    toolbarBeenFixed: true,\n    toolbarHeight: 50,\n    // buttons name, and order\n    toolbarButtons: ['select-picture', 'text-style'],\n\n    /**\n     * ******************************\n     * image options\n     * ******************************\n     */\n    // customize Picture Handler\n    // customPictureHandler: undefined,\n    // image max width\n    imageMaxWidth: 720,\n    // image max size, unit Kib, default 20M\n    imageMaxSize: 20480,\n    // template\n    imageSectionTemp: '<section class=\"child-is-picture\"><img src=\"{url}\" loading=\"lazy\"></section>',\n    // GIF pictures are not processed\n    ignoreGif: true,\n    // Force the width/height of the picture, even if the width/height of the picture\n    // is smaller than the target width/height\n    forceImageResize: false,\n\n    /**\n     * ******************************\n     * text style options\n     * ******************************\n     */\n    // text style, value ['#333', '#f00', ...]\n    // textStyleColors: undefined,\n    textStyleTitle: 'Set Style',\n    textStyleHeadLeftBtnText: 'Clear style',\n    textStyleHeadAlign: 'center',\n\n    /**\n     * ******************************\n     * color options\n     * ******************************\n     */\n    mainColor: '',\n    // border color\n    borderColor: ''\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:32:12 (GMT+0900)\n   */\n\n  var NODE_NAME_SECTION = 'SECTION';\n  var NODE_NAME_BR = 'BR';\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/09 21:12:46 (GMT+0900)\n   */\n\n  /**\n   * init editor dom\n   */\n\n  var initEditorDom = function initEditorDom() {\n    var el = createElement('div', {\n      \"class\": CLASS_NAME_EDITOR\n    });\n    return el;\n  };\n  /**\n   * 设置编辑器$content伪元素before的content值，并将css style元素添加至head中\n   * Set the content value of pseudo-element :before\n   * @param placeholder\n   */\n\n\n  var setContentValueOfPseudoElementBefore = function setContentValueOfPseudoElementBefore(placeholder) {\n    var _$;\n\n    // 为伪类content设值\n    var beforeStyle = \".\".concat(CLASS_NAME_EDITOR, \" .\").concat(CLASS_NAME_CONTENT, \".is-empty:before{content:'\").concat(placeholder, \"' !important;\"); // 生成style元素\n\n    var style = createElement('style', {\n      type: 'text/css'\n    }, beforeStyle); // 将style元素添加值head中\n\n    (_$ = $('head')) === null || _$ === void 0 ? void 0 : _$.append(style);\n  };\n  /**\n   * init content dom\n   * @param options\n   */\n\n\n  var initContentDom = function initContentDom(options) {\n    var contentStyles = _objectSpread(_objectSpread({\n      lineHeight: options.lineHeight,\n      minHeight: options.minHeight,\n      position: 'relative',\n      overflowY: 'scroll',\n      outline: 'none'\n    }, options.styles), {}, {\n      // placeholder\n      '--placeholder-color': options.placeholderColor,\n      '--line-height': options.lineHeight\n    });\n\n    setContentValueOfPseudoElementBefore(options.placeholder);\n    if (options.caretColor) contentStyles.caretColor = options.caretColor;\n    if (options.textColor) contentStyles.color = options.textColor;\n    var contentAttrs = {\n      \"class\": \"\".concat(CLASS_NAME_CONTENT, \" is-empty\"),\n      style: createStyles(contentStyles)\n    };\n    if (options.editable) contentAttrs.contenteditable = 'true';\n    var el = createElement('div', contentAttrs);\n    el.innerHTML = '<section><br></section>'; // return\n\n    return el;\n  };\n  /**\n   *\n   * @param input\n   * @param tagName\n   */\n\n\n  var _changeNodeName = function changeNodeName(input) {\n    var tagName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : NODE_NAME_SECTION;\n    var oldNodeName = input.nodeName;\n    var newNodeName = tagName.toUpperCase();\n    if (oldNodeName === newNodeName) return input;\n    var el = createElement(tagName);\n    var parent = input.parentElement;\n    var newEl; // LI元素处理：被修改的元素为UL/OL的内部元素\n\n    if (oldNodeName === 'LI' && isUlElement(parent)) {\n      // 替换当前LI元素标签为新元素标签\n      el.innerHTML = replaceHtmlTag(input.outerHTML, oldNodeName, newNodeName); // 获取新元素\n\n      newEl = el.firstChild; // 有多个LI元素\n\n      if (parent.childElementCount > 1) {\n        // 当前LI元素为UL的第一个元素\n        if (parent.firstElementChild === input) {\n          var _parent$parentElement;\n\n          // 将新元素移动至UL/OL前面\n          (_parent$parentElement = parent.parentElement) === null || _parent$parentElement === void 0 ? void 0 : _parent$parentElement.insertBefore(newEl, parent);\n        } // 当前LI元素为UL的最后一个元素\n        else if (parent.lastElementChild === input) {\n          var _parent$parentElement2;\n\n          var parentNext = (_parent$parentElement2 = parent.parentElement) === null || _parent$parentElement2 === void 0 ? void 0 : _parent$parentElement2.nextElementSibling; // 下一个兄弟元素存在，添加至下一个兄弟元素前面\n\n          if (parentNext) {\n            var _parentNext$parentEle;\n\n            (_parentNext$parentEle = parentNext.parentElement) === null || _parentNext$parentEle === void 0 ? void 0 : _parentNext$parentEle.insertBefore(newEl, parentNext);\n          } else {\n            var _parent$parentElement3;\n\n            // 下一个兄弟元素不存在，添加至内容尾部\n            (_parent$parentElement3 = parent.parentElement) === null || _parent$parentElement3 === void 0 ? void 0 : _parent$parentElement3.append(newEl);\n          }\n        } // 当前LI元素为UL中间的一个元素，拆分当前UL/OL\n        else {\n          var _parent$parentElement4, _parent$parentElement5;\n\n          var elList = slice(parent.children);\n          var prevEl = createElement(parent.nodeName);\n          var tempEl = elList.shift();\n\n          while (tempEl) {\n            if (tempEl === input) break;\n            prevEl.append(tempEl);\n            tempEl = elList.shift();\n          }\n\n          (_parent$parentElement4 = parent.parentElement) === null || _parent$parentElement4 === void 0 ? void 0 : _parent$parentElement4.insertBefore(prevEl, parent); // 将新元素插入到当前UL/OL元素前面\n\n          (_parent$parentElement5 = parent.parentElement) === null || _parent$parentElement5 === void 0 ? void 0 : _parent$parentElement5.insertBefore(newEl, parent); // 删除被替换的对象元素\n\n          parent.removeChild(input);\n        }\n      } // 只有一个LI元素\n      else {\n        var _parent$parentElement6, _parent$parentElement7;\n\n        // 将新元素移动至UL/OL前面\n        (_parent$parentElement6 = parent.parentElement) === null || _parent$parentElement6 === void 0 ? void 0 : _parent$parentElement6.insertBefore(newEl, parent); // 移除UL/OL空元素\n\n        (_parent$parentElement7 = parent.parentElement) === null || _parent$parentElement7 === void 0 ? void 0 : _parent$parentElement7.removeChild(parent);\n      }\n\n      return newEl;\n    }\n\n    if (REPLACE_NODE_LIST.includes(oldNodeName)) {\n      // change to ul, ol\n      if (/UL|OL/.test(newNodeName)) {\n        var prev = input.previousElementSibling;\n        var next = input.nextElementSibling;\n\n        if (prev && isUlElement(prev)) {\n          el.innerHTML = replaceHtmlTag(input.outerHTML, oldNodeName, 'li');\n          newEl = el.firstChild;\n          prev.append(newEl);\n          parent === null || parent === void 0 ? void 0 : parent.removeChild(input); // parent的下一个元素也为UL/OL元素，将其合并\n\n          if (next && next.nodeName === prev.nodeName) {\n            var _next$parentElement;\n\n            var nextEls = slice(next.children);\n            prev.append.apply(prev, _toConsumableArray(nextEls));\n            (_next$parentElement = next.parentElement) === null || _next$parentElement === void 0 ? void 0 : _next$parentElement.removeChild(next);\n          }\n        } else if (next && isUlElement(next)) {\n          el.innerHTML = replaceHtmlTag(input.outerHTML, oldNodeName, 'li');\n          newEl = el.firstChild;\n          next.insertBefore(newEl, next.firstElementChild);\n          parent === null || parent === void 0 ? void 0 : parent.removeChild(input); // parent的上一个元素也为UL/OL元素，将其合并\n          // 不可能发生never\n        } else {\n          // 替换当前元素为UL/OL\n          newEl = el;\n          el.innerHTML = replaceHtmlTag(input.outerHTML, oldNodeName, 'li');\n          parent === null || parent === void 0 ? void 0 : parent.replaceChild(newEl, input);\n        }\n      } else {\n        el.innerHTML = replaceHtmlTag(input.outerHTML, oldNodeName, newNodeName);\n        newEl = el.firstChild;\n        parent === null || parent === void 0 ? void 0 : parent.replaceChild(newEl, input);\n      }\n\n      return newEl;\n    }\n\n    el.append(input.cloneNode(true));\n    parent === null || parent === void 0 ? void 0 : parent.replaceChild(el, input);\n    return el;\n  };\n\n  var checkIsEmpty = function checkIsEmpty(el) {\n    if (el.children.length <= 1 && isBrSection(el.children[0])) {\n      el.classList.add('is-empty');\n    } else {\n      el.classList.remove('is-empty');\n    }\n  };\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/07 10:33:02 (GMT+0900)\n   */\n\n\n  var CursorClass = /*#__PURE__*/function () {\n    function CursorClass(rootElement) {\n      var _el$textContent;\n\n      _classCallCheck(this, CursorClass);\n\n      _defineProperty(this, \"rootElement\", void 0);\n\n      _defineProperty(this, \"timer\", void 0);\n\n      this.rootElement = rootElement;\n      this.timer = null; // init range\n\n      var el = rootElement.lastElementChild;\n      if (el) this.setRange(el, (_el$textContent = el.textContent) === null || _el$textContent === void 0 ? void 0 : _el$textContent.length);\n    }\n\n    _createClass(CursorClass, [{\n      key: \"getRange\",\n      value: function getRange() {\n        try {\n          var _window$getSelection;\n\n          // @ts-ignore\n          return (_window$getSelection = window.getSelection()) === null || _window$getSelection === void 0 ? void 0 : _window$getSelection.getRangeAt(0);\n        } catch (e) {// ..\n        }\n\n        return new Range();\n      }\n      /**\n       * 获取当前元素的最后一个无子节点的节点\n       * @param el\n       * @private\n       */\n\n    }, {\n      key: \"_getLastNode\",\n      value: function _getLastNode(el) {\n        var node = el;\n\n        while (node.lastChild) {\n          node = node.lastChild;\n        }\n\n        return node;\n      }\n    }, {\n      key: \"setRange\",\n      value: function setRange(el, offset) {\n        var range = this.getRange(); // remove all range object\n\n        var selection = window.getSelection();\n        if (selection) selection.removeAllRanges(); // el: '<section>inner text.</section>'\n        // let targetNode = el.childNodes[el.childNodes.length - 1] || el\n        // // check img/video/audio\n        // if (/IMG|VIDEO|AUDIO/.test(targetNode.nodeName)) {\n        //   offset = 1\n        //   // get parentNode, can't set offset = 1 of IMG node.\n        //   targetNode = targetNode.parentNode as HTMLElement\n        // }\n\n        var targetNode = this._getLastNode(el);\n\n        if (typeof offset === 'undefined') {\n          var _targetNode$textConte, _targetNode$textConte2;\n\n          offset = (_targetNode$textConte = (_targetNode$textConte2 = targetNode.textContent) === null || _targetNode$textConte2 === void 0 ? void 0 : _targetNode$textConte2.length) !== null && _targetNode$textConte !== void 0 ? _targetNode$textConte : 0;\n        }\n\n        range.setStart(targetNode, offset); // cursor start and end position is collapse\n\n        range.collapse(true);\n\n        this._clearTimeout(); // 延时执行，键盘自动收起后再触发focus\n        // @ts-ignore\n\n\n        this.timer = setTimeout(function () {\n          // 插入新的光标对象\n          selection === null || selection === void 0 ? void 0 : selection.addRange(range);\n        }, 100);\n      }\n    }, {\n      key: \"_clearTimeout\",\n      value: function _clearTimeout() {\n        if (this.timer) {\n          clearTimeout(this.timer);\n          this.timer = null;\n        }\n      }\n    }, {\n      key: \"getCurrentNode\",\n      value: function getCurrentNode() {\n        var isOnlyContentChild = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var range = this.getRange();\n        var currentNode = range.endContainer;\n\n        while (currentNode && this.rootElement !== currentNode) {\n          var _currentNode$parentEl;\n\n          // li元素判断\n          if (!isOnlyContentChild && currentNode.nodeName === 'LI' && ((_currentNode$parentEl = currentNode.parentElement) === null || _currentNode$parentEl === void 0 ? void 0 : _currentNode$parentEl.parentElement) === this.rootElement) {\n            return currentNode;\n          }\n\n          if (currentNode.parentElement === this.rootElement) {\n            return currentNode;\n          } else {\n            currentNode = currentNode.parentNode;\n          }\n        }\n\n        return this.rootElement.lastElementChild;\n      }\n    }]);\n\n    return CursorClass;\n  }();\n\n  var EventEmitter = /*#__PURE__*/function () {\n    function EventEmitter() {\n      _classCallCheck(this, EventEmitter);\n\n      _defineProperty(this, \"eventList\", void 0);\n\n      this.eventList = {};\n    }\n    /**\n     * on\n     * @param eventName\n     * @param fn\n     */\n\n\n    _createClass(EventEmitter, [{\n      key: \"on\",\n      value: function on(eventName, fn) {\n        if (!eventName || !fn || typeof fn !== 'function') return;\n\n        if (!this.eventList[eventName]) {\n          this.eventList[eventName] = [];\n        }\n\n        this.eventList[eventName].push(fn);\n      }\n      /**\n       * emit\n       * @param eventName\n       * @param args\n       */\n\n    }, {\n      key: \"emit\",\n      value: function emit(eventName) {\n        var fnList = this.eventList[eventName];\n        if (!fnList) return;\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        for (var i = 0; i < fnList.length; i++) {\n          try {\n            fnList[i].apply(null, args);\n          } catch (e) {\n            this.emit('error', e, 'emit');\n          }\n        }\n      }\n      /**\n       * off\n       * @param eventName\n       * @param fn\n       */\n\n    }, {\n      key: \"off\",\n      value: function off(eventName, fn) {\n        if (!this.eventList[eventName]) return;\n        var eventList = this.eventList[eventName];\n\n        if (typeof fn === 'function') {\n          var index = eventList.findIndex(function (item) {\n            return item === fn;\n          });\n          if (index >= 0) eventList.splice(index, 1);\n        } else {\n          this.eventList[eventName].length = 0;\n        }\n\n        this._removeEmpty(eventName);\n      }\n      /**\n       * remove empty event list\n       * @param eventName\n       * @private\n       */\n\n    }, {\n      key: \"_removeEmpty\",\n      value: function _removeEmpty(eventName) {\n        if (!this.eventList[eventName].length) {\n          delete this.eventList[eventName];\n        }\n      }\n    }, {\n      key: \"destroyEventEmitter\",\n      value: function destroyEventEmitter() {\n        var _this = this;\n\n        Object.keys(this.eventList).forEach(function (key) {\n          return _this.off(key);\n        });\n      }\n    }]);\n\n    return EventEmitter;\n  }();\n  /**\n   * Created by Capricorncd.\n   * https://github.com/capricorncd\n   * Date: 2022/05/05 10:29:43 (GMT+0900)\n   */\n\n\n  var ZxEditor = /*#__PURE__*/function (_EventEmitter) {\n    _inherits(ZxEditor, _EventEmitter);\n\n    var _super = _createSuper(ZxEditor);\n\n    // 编辑器外部容器HTML元素\n    // 版本\n    // 参数\n    // 编辑器HTML元素\n    // 编辑器内容区域HTML元素\n    // 光标处理对象\n    // 内容元素事件处理函数\n    // 内容中允许使用的元素标签\n    function ZxEditor(selector, options) {\n      var _this2;\n\n      _classCallCheck(this, ZxEditor);\n\n      _this2 = _super.call(this);\n\n      _defineProperty(_assertThisInitialized(_this2), \"$wrapper\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"version\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"options\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"$editor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"$content\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"cursor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"_contentEvent\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this2), \"allowedNodeNames\", void 0);\n\n      if (!(_assertThisInitialized(_this2) instanceof ZxEditor)) {\n        throw new Error('ZxEditor is a constructor and should be called with the `new` keyword');\n      }\n      /**\n       * ***************************************************\n       * check selector\n       * ***************************************************\n       */\n\n\n      var container = $(selector);\n\n      if (!container) {\n        throw new Error(\"Can't found '\".concat(selector, \"' Node in document!\"));\n      }\n\n      _this2.$wrapper = container; // version\n\n      _this2.version = '3.1.0'; // options\n\n      _this2.options = _objectSpread(_objectSpread({}, DEF_OPTIONS), options);\n      _this2.allowedNodeNames = (_this2.options.allowedNodeNames || ALLOWED_NODE_NAMES).map(function (item) {\n        return item.toUpperCase();\n      }); // elements\n\n      _this2.$content = initContentDom(_this2.options);\n      _this2.$editor = initEditorDom();\n\n      _this2.$editor.append(_this2.$content);\n\n      _this2.$wrapper.append(_this2.$editor); // cursor\n\n\n      _this2.cursor = new CursorClass(_this2.$content); // content event handler\n\n      _this2._contentEvent = function (e) {\n        var type = e.type;\n        if (type === 'blur') _this2._lastLine();\n\n        _this2.emit(type === 'input' ? 'change' : type, e);\n\n        checkIsEmpty(_this2.$content);\n      };\n\n      _this2._initEvents();\n\n      return _this2;\n    }\n    /**\n     * init events\n     * @private\n     */\n\n\n    _createClass(ZxEditor, [{\n      key: \"_initEvents\",\n      value: function _initEvents() {\n        this.$content.addEventListener('focus', this._contentEvent);\n        this.$content.addEventListener('blur', this._contentEvent);\n        this.$content.addEventListener('input', this._contentEvent);\n      }\n      /**\n       * 扩展插件\n       * @param plugin\n       */\n\n    }, {\n      key: \"use\",\n      value: function use(plugin) {\n        if (typeof plugin.install === 'function') {\n          plugin.install(this);\n        }\n      }\n      /**\n       * plugin\n       * @param fn\n       */\n\n    }, {\n      key: \"plugin\",\n      value: function plugin(fn) {\n        if (typeof fn === 'function') fn.call(this);\n      }\n      /**\n       * 设置编辑器内容，会覆盖之前内容\n       * set html to the content element\n       * @param html\n       */\n\n    }, {\n      key: \"setHtml\",\n      value: function setHtml(html) {\n        this.$content.innerHTML = '';\n        this.insert(html);\n\n        this._lastLine();\n      }\n      /**\n       * 获取编辑器中的HTML代码，会自动去除结尾处的空行\n       * get html string from content element\n       * remove last line that `<section><br></section>`\n       * @return html string\n       */\n\n    }, {\n      key: \"getHtml\",\n      value: function getHtml() {\n        return this.$content.innerHTML.replace(/<section><br><\\/section>$/, '');\n      }\n      /**\n       * 向编辑器中插入内容/HTML代码/元素等\n       * insert html or element to content element\n       * @param input\n       */\n\n    }, {\n      key: \"insert\",\n      value: function insert(input) {\n        var _this3 = this;\n\n        // insert HTMLElement\n        if (input instanceof HTMLElement) {\n          this._insert(input);\n        } // insert string\n        else {\n          var el = createElement('div');\n          el.innerHTML = input;\n          slice(el.childNodes).forEach(function (node) {\n            // element node\n            if (node.nodeType === Node.ELEMENT_NODE) {\n              // <br> element\n              if (node.nodeName === NODE_NAME_BR) {\n                _this3._insert(createElement(NODE_NAME_SECTION, {}, '<br/>'));\n              } else {\n                _this3._insert(node);\n              }\n            } // text\n            else if (node.textContent) {\n              _this3._insert(createElement(NODE_NAME_SECTION, {}, node.textContent));\n            }\n          });\n        }\n\n        this._dispatchChange();\n      }\n      /**\n       * insert element to content element\n       * @param input\n       * @private\n       */\n\n    }, {\n      key: \"_insert\",\n      value: function _insert(input) {\n        var currentSection = this.getCurrentNode();\n\n        if (currentSection) {\n          if (isBrSection(currentSection)) {\n            this.$content.insertBefore(input, currentSection);\n          } else {\n            this.$content.insertBefore(input, currentSection.nextElementSibling);\n          }\n        } else {\n          this.$content.append(input);\n        }\n\n        if (!this.allowedNodeNames.includes(input.nodeName)) {\n          input = _changeNodeName(input, NODE_NAME_SECTION);\n        } // 设置光标元素对象\n\n\n        this.cursor.setRange(input);\n      }\n      /**\n       * 检查编辑器最后一段是否为空行，非空行则插入\n       * append br section to content element when the lastElementChild is not a br section element\n       * @private\n       */\n\n    }, {\n      key: \"_lastLine\",\n      value: function _lastLine() {\n        if (!isBrSection(this.$content.lastElementChild)) {\n          this.$content.appendChild(createElement('section', {}, '<br>'));\n        }\n      }\n      /**\n       * 修改光标所在元素的标签\n       * @param nodeName\n       */\n\n    }, {\n      key: \"changeNodeName\",\n      value: function changeNodeName(nodeName) {\n        // 判断nodeName是否被允许设置\n        if (!this.allowedNodeNames.includes(nodeName.toUpperCase())) return false;\n        var currentSection = this.getCurrentNode();\n\n        if (currentSection && _changeNodeName(currentSection, nodeName)) {\n          this._dispatchChange();\n\n          return true;\n        }\n\n        return false;\n      }\n      /**\n       * 修改光标所在元素的样式\n       * @param styles\n       * @param value\n       */\n\n    }, {\n      key: \"changeStyles\",\n      value: function changeStyles(styles, value) {\n        var current = this.getCurrentNode(true);\n\n        if (current) {\n          var s = typeof styles === 'string' ? _defineProperty({}, styles, value) : styles;\n          current.setAttribute('style', createStyles(_getStyles(current), s));\n\n          this._dispatchChange();\n        }\n      }\n    }, {\n      key: \"_dispatchChange\",\n      value: function _dispatchChange() {\n        this.$content.dispatchEvent(new InputEvent('input'));\n      }\n      /**\n       * 获取光标所在的元素的style对象\n       */\n\n    }, {\n      key: \"getStyles\",\n      value: function getStyles() {\n        return _getStyles(this.getCurrentNode());\n      }\n      /**\n       * 获取光标所在的元素\n       * @param isOnlyContentChild\n       */\n\n    }, {\n      key: \"getCurrentNode\",\n      value: function getCurrentNode() {\n        var isOnlyContentChild = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        return this.cursor.getCurrentNode(isOnlyContentChild);\n      }\n      /**\n       * 销毁事件\n       * destroy events\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.$content.removeEventListener('focus', this._contentEvent);\n        this.$content.removeEventListener('blur', this._contentEvent);\n        this.$content.removeEventListener('input', this._contentEvent);\n        this.destroyEventEmitter();\n      }\n    }]);\n\n    return ZxEditor;\n  }(EventEmitter);\n\n  _exports.ZxEditor = ZxEditor;\n});\n//# sourceMappingURL=zx-editor.js.map\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","define","amd","exports","mod","unknown","globalThis","self","this","_exports","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","call","e","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","arguments","apply","_possibleConstructorReturn","TypeError","_assertThisInitialized","ReferenceError","getPrototypeOf","_classCallCheck","instance","Constructor","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_slicedToArray","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","err","_iterableToArrayLimit","_nonIterableRest","minLen","n","toString","slice","name","test","len","arr2","ZxEditor","toSnakeCase","str","connectSymbol","undefined","replace","s","concat","toLowerCase","toCamelCase","_","toUpperCase","arrLike","offset","$","selector","doc","document","HTMLElement","querySelector","createElement","tag","attrs","innerHTML","el","_Object$entries","entries","_Object$entries$_i","val","setAttribute","createStyles","data","extendStyles","_i2","_Object$entries2","_Object$entries2$_i","_i3","_Object$entries3","_Object$entries3$_i","_key","_value","join","replaceHtmlTag","input","oldNodeName","newNodeName","RegExp","match","isUlElement","nodeName","isBrSection","nodes","childNodes","_getStyles","getAttribute","split","reduce","prev","_s$split2","CLASS_NAME_EDITOR","CLASS_NAME_CONTENT","ALLOWED_NODE_NAMES","REPLACE_NODE_LIST","DEF_OPTIONS","editable","minHeight","placeholder","placeholderColor","lineHeight","allowedNodeNames","caretColor","textColor","cursorOffsetTop","customPasteHandler","toolbarBeenFixed","toolbarHeight","toolbarButtons","imageMaxWidth","imageMaxSize","imageSectionTemp","ignoreGif","forceImageResize","textStyleTitle","textStyleHeadLeftBtnText","textStyleHeadAlign","mainColor","borderColor","NODE_NAME_SECTION","initContentDom","options","_$","beforeStyle","style","contentStyles","position","overflowY","outline","styles","type","append","color","contentAttrs","class","contenteditable","_changeNodeName","tagName","newEl","parent","parentElement","_parent$parentElement","_parent$parentElement6","_parent$parentElement7","outerHTML","firstChild","childElementCount","firstElementChild","insertBefore","lastElementChild","_parent$parentElement2","_parentNext$parentEle","_parent$parentElement3","parentNext","nextElementSibling","_parent$parentElement4","_parent$parentElement5","elList","children","prevEl","tempEl","shift","removeChild","includes","previousElementSibling","_next$parentElement","nextEls","replaceChild","cloneNode","CursorClass","rootElement","_el$textContent","timer","setRange","textContent","_window$getSelection","window","getSelection","getRangeAt","Range","node","lastChild","range","getRange","selection","removeAllRanges","_targetNode$textConte","_targetNode$textConte2","targetNode","_getLastNode","setStart","collapse","_clearTimeout","setTimeout","addRange","clearTimeout","isOnlyContentChild","currentNode","endContainer","_currentNode$parentEl","parentNode","EventEmitter","eventList","eventName","fn","fnList","_len","args","_key2","emit","index","findIndex","item","splice","_removeEmpty","_this","off","_EventEmitter","subClass","superClass","create","_inherits","_super","_this2","Error","container","$wrapper","version","map","$content","$editor","cursor","_contentEvent","_lastLine","classList","add","remove","_initEvents","addEventListener","plugin","install","html","insert","_this3","_insert","nodeType","Node","ELEMENT_NODE","_dispatchChange","currentSection","getCurrentNode","appendChild","current","dispatchEvent","InputEvent","removeEventListener","destroyEventEmitter"],"mappings":"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"}