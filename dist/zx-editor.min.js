function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.unknown=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(t){function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}
/*!
   * zx-editor v3.1.0
   * https://github.com/capricorncd/zx-editor
   * Released under the MIT License
   * Released on: Sat May 14 2022 11:56:12 GMT+0900 (Japan Standard Time)
   * Copyright Â© 2018-present, capricorncd
   */(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.ZxEditor=void 0;var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return"".concat(t).concat(e.toLowerCase())}))},g=function(e){return e.replace(/[-_\s](\w)/g,(function(e,t){return t.toUpperCase()}))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(e,t)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e instanceof HTMLElement?e:t.querySelector(e)},C=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=document.createElement(e),o=0,i=Object.entries(t);o<i.length;o++){var l=p(i[o],2),a=l[0],u=l[1];r.setAttribute(a,u)}return n&&(r.innerHTML=n),r},L=function(e,t){if(t)for(var n=0,r=Object.entries(t);n<r.length;n++){var o=p(r[n],2),i=o[0],l=o[1];e[g(i)]=l}for(var a=[],u=0,s=Object.entries(e);u<s.length;u++){var c=p(s[u],2),f=c[0],d=c[1];""!==d&&null!=d&&a.push("".concat(m(f),":").concat(d))}return a.join(";")},w=function(e,t,n){return e.replace(RegExp("(^<"+t+")|("+t+">$)","gi"),(function(e){return e.toUpperCase().replace(t,n.toLowerCase())}))},O=function(e){return/UL|OL/.test(e.nodeName)},N=function(e){if(!e)return!1;var t=b(e.childNodes);return 1===t.length&&"BR"===t[0].nodeName},H=function(e){return e?(e.getAttribute("style")||"").split(/\s?;\s?/).reduce((function(e,t){var n=p(t.split(/\s?:\s?/),2),r=n[0],o=n[1];return e[g(r)]=o,e}),{}):{}},T="zx-editor",_="".concat(T,"__content-wrapper"),S=["SECTION","H1","H2","H3","H4","H5","BLOCKQUOTE","UL","OL"],x=["DIV","P","ARTICLE","ASIDE","DETAILS","SUMMARY","FOOTER","HEADER","MAIN","NAV","SECTION","H1","H2","H3","H4","H5","H6","BLOCKQUOTE"],j={editable:!0,minHeight:"50vh",placeholder:"Enter...",placeholderColor:"",lineHeight:1.5,allowedNodeNames:S,caretColor:"",textColor:"",cursorOffsetTop:30,customPasteHandler:void 0,toolbarBeenFixed:!0,toolbarHeight:50,toolbarButtons:["select-picture","text-style"],imageMaxWidth:720,imageMaxSize:20480,imageSectionTemp:'<section class="child-is-picture"><img src="{url}" loading="lazy"></section>',ignoreGif:!0,forceImageResize:!1,textStyleTitle:"Set Style",textStyleHeadLeftBtnText:"Clear style",textStyleHeadAlign:"center",mainColor:"",borderColor:""},k="SECTION",$=function(e){var t,n,r,o,i=d(d({lineHeight:e.lineHeight,minHeight:e.minHeight,position:"relative",overflowY:"scroll",outline:"none"},e.styles),{},{"--placeholder-color":e.placeholderColor,"--line-height":e.lineHeight});t=e.placeholder,r=".".concat(T," .").concat(_,".is-empty:before{content:'").concat(t,"' !important;"),o=C("style",{type:"text/css"},r),null===(n=E("head"))||void 0===n||n.append(o),e.caretColor&&(i.caretColor=e.caretColor),e.textColor&&(i.color=e.textColor);var l={class:"".concat(_," is-empty"),style:L(i)};e.editable&&(l.contenteditable="true");var a=C("div",l);return a.innerHTML="<section><br></section>",a},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,n=e.nodeName,r=t.toUpperCase();if(n===r)return e;var o,i=C(t),l=e.parentElement;if("LI"===n&&O(l)){var a,u,s;if(i.innerHTML=w(e.outerHTML,n,r),o=i.firstChild,l.childElementCount>1)if(l.firstElementChild===e)null===(a=l.parentElement)||void 0===a||a.insertBefore(o,l);else if(l.lastElementChild===e){var f,d,h,p=null===(f=l.parentElement)||void 0===f?void 0:f.nextElementSibling;if(p)null===(d=p.parentElement)||void 0===d||d.insertBefore(o,p);else null===(h=l.parentElement)||void 0===h||h.append(o)}else{for(var v,y,m=b(l.children),g=C(l.nodeName),E=m.shift();E&&E!==e;)g.append(E),E=m.shift();null===(v=l.parentElement)||void 0===v||v.insertBefore(g,l),null===(y=l.parentElement)||void 0===y||y.insertBefore(o,l),l.removeChild(e)}else null===(u=l.parentElement)||void 0===u||u.insertBefore(o,l),null===(s=l.parentElement)||void 0===s||s.removeChild(l);return o}if(x.includes(n)){if(/UL|OL/.test(r)){var L=e.previousElementSibling,N=e.nextElementSibling;if(L&&O(L)){if(i.innerHTML=w(e.outerHTML,n,"li"),o=i.firstChild,L.append(o),null==l||l.removeChild(e),N&&N.nodeName===L.nodeName){var H,T=b(N.children);L.append.apply(L,c(T)),null===(H=N.parentElement)||void 0===H||H.removeChild(N)}}else N&&O(N)?(i.innerHTML=w(e.outerHTML,n,"li"),o=i.firstChild,N.insertBefore(o,N.firstElementChild),null==l||l.removeChild(e)):(o=i,i.innerHTML=w(e.outerHTML,n,"li"),null==l||l.replaceChild(o,e))}else i.innerHTML=w(e.outerHTML,n,r),o=i.firstChild,null==l||l.replaceChild(o,e);return o}return i.append(e.cloneNode(!0)),null==l||l.replaceChild(i,e),i},M=function(){function e(t){var n;a(this,e),h(this,"rootElement",void 0),h(this,"timer",void 0),this.rootElement=t,this.timer=null;var r=t.lastElementChild;r&&this.setRange(r,null===(n=r.textContent)||void 0===n?void 0:n.length)}return s(e,[{key:"getRange",value:function(){try{var e;return null===(e=window.getSelection())||void 0===e?void 0:e.getRangeAt(0)}catch(e){}return new Range}},{key:"_getLastNode",value:function(e){for(var t=e;t.lastChild;)t=t.lastChild;return t}},{key:"setRange",value:function(e,t){var n=this.getRange(),r=window.getSelection();r&&r.removeAllRanges();var o,i,l=this._getLastNode(e);void 0===t&&(t=null!==(o=null===(i=l.textContent)||void 0===i?void 0:i.length)&&void 0!==o?o:0);n.setStart(l,t),n.collapse(!0),this._clearTimeout(),this.timer=setTimeout((function(){null==r||r.addRange(n)}),100)}},{key:"_clearTimeout",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"getCurrentNode",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getRange(),n=t.endContainer;n&&this.rootElement!==n;){var r;if(!e&&"LI"===n.nodeName&&(null===(r=n.parentElement)||void 0===r?void 0:r.parentElement)===this.rootElement)return n;if(n.parentElement===this.rootElement)return n;n=n.parentNode}return this.rootElement.lastElementChild}}]),e}(),R=function(){function e(){a(this,e),h(this,"eventList",void 0),this.eventList={}}return s(e,[{key:"on",value:function(e,t){e&&t&&"function"==typeof t&&(this.eventList[e]||(this.eventList[e]=[]),this.eventList[e].push(t))}},{key:"emit",value:function(e){var t=this.eventList[e];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)try{t[i].apply(null,r)}catch(e){this.emit("error",e,"emit")}}}},{key:"off",value:function(e,t){if(this.eventList[e]){var n=this.eventList[e];if("function"==typeof t){var r=n.findIndex((function(e){return e===t}));r>=0&&n.splice(r,1)}else this.eventList[e].length=0;this._removeEmpty(e)}}},{key:"_removeEmpty",value:function(e){this.eventList[e].length||delete this.eventList[e]}},{key:"destroyEventEmitter",value:function(){var e=this;Object.keys(this.eventList).forEach((function(t){return e.off(t)}))}}]),e}(),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}(o,e);var t=r(o);function o(e,n){var r;if(a(this,o),h(i(r=t.call(this)),"$wrapper",void 0),h(i(r),"version",void 0),h(i(r),"options",void 0),h(i(r),"$editor",void 0),h(i(r),"$content",void 0),h(i(r),"cursor",void 0),h(i(r),"_contentEvent",void 0),h(i(r),"allowedNodeNames",void 0),!(i(r)instanceof o))throw new Error("ZxEditor is a constructor and should be called with the `new` keyword");var l=E(e);if(!l)throw new Error("Can't found '".concat(e,"' Node in document!"));return r.$wrapper=l,r.version="3.1.0",r.options=d(d({},j),n),r.allowedNodeNames=(r.options.allowedNodeNames||S).map((function(e){return e.toUpperCase()})),r.$content=$(r.options),r.$editor=C("div",{class:T}),r.$editor.append(r.$content),r.$wrapper.append(r.$editor),r.cursor=new M(r.$content),r._contentEvent=function(e){var t,n=e.type;"blur"===n&&r._lastLine(),r.emit("input"===n?"change":n,e),(t=r.$content).children.length<=1&&N(t.children[0])?t.classList.add("is-empty"):t.classList.remove("is-empty")},r._initEvents(),r}return s(o,[{key:"_initEvents",value:function(){this.$content.addEventListener("focus",this._contentEvent),this.$content.addEventListener("blur",this._contentEvent),this.$content.addEventListener("input",this._contentEvent)}},{key:"use",value:function(e){"function"==typeof e.install&&e.install(this)}},{key:"plugin",value:function(e){"function"==typeof e&&e.call(this)}},{key:"setHtml",value:function(e){this.$content.innerHTML="",this.insert(e),this._lastLine()}},{key:"getHtml",value:function(){return this.$content.innerHTML.replace(/<section><br><\/section>$/,"")}},{key:"insert",value:function(e){var t=this;if(e instanceof HTMLElement)this._insert(e);else{var n=C("div");n.innerHTML=e,b(n.childNodes).forEach((function(e){e.nodeType===Node.ELEMENT_NODE?"BR"===e.nodeName?t._insert(C(k,{},"<br/>")):t._insert(e):e.textContent&&t._insert(C(k,{},e.textContent))}))}this._dispatchChange()}},{key:"_insert",value:function(e){var t=this.getCurrentNode();t?N(t)?this.$content.insertBefore(e,t):this.$content.insertBefore(e,t.nextElementSibling):this.$content.append(e),this.allowedNodeNames.includes(e.nodeName)||(e=A(e,k)),this.cursor.setRange(e)}},{key:"_lastLine",value:function(){N(this.$content.lastElementChild)||this.$content.appendChild(C("section",{},"<br>"))}},{key:"changeNodeName",value:function(e){if(!this.allowedNodeNames.includes(e.toUpperCase()))return!1;var t=this.getCurrentNode();return!(!t||!A(t,e))&&(this._dispatchChange(),!0)}},{key:"changeStyles",value:function(e,t){var n=this.getCurrentNode(!0);if(n){var r="string"==typeof e?h({},e,t):e;n.setAttribute("style",L(H(n),r)),this._dispatchChange()}}},{key:"_dispatchChange",value:function(){this.$content.dispatchEvent(new InputEvent("input"))}},{key:"getStyles",value:function(){return H(this.getCurrentNode())}},{key:"getCurrentNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cursor.getCurrentNode(e)}},{key:"destroy",value:function(){this.$content.removeEventListener("focus",this._contentEvent),this.$content.removeEventListener("blur",this._contentEvent),this.$content.removeEventListener("input",this._contentEvent),this.destroyEventEmitter()}}]),o}(R);t.ZxEditor=P}));
//# sourceMappingURL=zx-editor.min.js.map
