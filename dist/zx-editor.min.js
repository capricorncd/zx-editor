function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.unknown=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(t){function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}
/*!
   * zx-editor v3.1.0
   * https://github.com/capricorncd/zx-editor
   * Released under the MIT License
   * Released on: Mon May 09 2022 21:23:01 GMT+0900 (Japan Standard Time)
   * Copyright Â© 2018-present, capricorncd
   */(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.ZxEditor=void 0;var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return"".concat(t).concat(e.toLowerCase())}))},b=function(e){return e.replace(/[-_\s](\w)/g,(function(e,t){return t.toUpperCase()}))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(e,t)},E=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=document.createElement(e),o=0,i=Object.entries(t);o<i.length;o++){var l=p(i[o],2),a=l[0],u=l[1];r.setAttribute(a,u)}return n&&(r.innerHTML=n),r},C=function(e,t){if(t)for(var n=0,r=Object.entries(t);n<r.length;n++){var o=p(r[n],2),i=o[0],l=o[1];e[b(i)]=l}for(var a=[],u=0,s=Object.entries(e);u<s.length;u++){var c=p(s[u],2),f=c[0],d=c[1];""!==d&&null!=d&&a.push("".concat(m(f),":").concat(d))}return a.join(";")},L=function(e,t,n){return e.replace(RegExp("(^<"+t+")|("+t+">$)","gi"),(function(e){return e.toUpperCase().replace(t,n.toLowerCase())}))},w=function(e){return/UL|OL/.test(e.nodeName)},O=function(e){if(!e)return!1;var t=g(e.childNodes);return 1===t.length&&"BR"===t[0].nodeName},N=["SECTION","H1","H2","H3","H4","H5","BLOCKQUOTE","UL","OL"],T=["DIV","P","ARTICLE","ASIDE","DETAILS","SUMMARY","FOOTER","HEADER","MAIN","NAV","SECTION","H1","H2","H3","H4","H5","H6","BLOCKQUOTE"],H={editable:!0,minHeight:"50vh",placeholder:"Enter...",placeholderColor:"",lineHeight:1.5,allowedNodeNames:N,caretColor:"",textColor:"",cursorOffsetTop:30,customPasteHandler:void 0,toolbarBeenFixed:!0,toolbarHeight:50,toolbarButtons:["select-picture","text-style"],imageMaxWidth:720,imageMaxSize:20480,imageSectionTemp:'<section class="child-is-picture"><img src="{url}" loading="lazy"></section>',ignoreGif:!0,forceImageResize:!1,textStyleTitle:"Set Style",textStyleHeadLeftBtnText:"Clear style",textStyleHeadAlign:"center",mainColor:"",borderColor:""},S="SECTION",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,n=e.nodeName,r=t.toUpperCase();if(n===r)return e;var o,i=E(t),l=e.parentElement;if("LI"===n&&w(l)){var a,u,s;if(i.innerHTML=L(e.outerHTML,n,r),o=i.firstChild,l.childElementCount>1)if(l.firstElementChild===e)null===(a=l.parentElement)||void 0===a||a.insertBefore(o,l);else if(l.lastElementChild===e){var f,d,v,p=null===(f=l.parentElement)||void 0===f?void 0:f.nextElementSibling;if(p)null===(d=p.parentElement)||void 0===d||d.insertBefore(o,p);else null===(v=l.parentElement)||void 0===v||v.append(o)}else{for(var h,y,m=g(l.children),b=E(l.nodeName),C=m.shift();C&&C!==e;)b.append(C),C=m.shift();null===(h=l.parentElement)||void 0===h||h.insertBefore(b,l),null===(y=l.parentElement)||void 0===y||y.insertBefore(o,l),l.removeChild(e)}else null===(u=l.parentElement)||void 0===u||u.insertBefore(o,l),null===(s=l.parentElement)||void 0===s||s.removeChild(l);return o}if(T.includes(n)){if(/UL|OL/.test(r)){var O=e.previousElementSibling,N=e.nextElementSibling;if(O&&w(O)){if(i.innerHTML=L(e.outerHTML,n,"li"),o=i.firstChild,O.append(o),null==l||l.removeChild(e),N&&N.nodeName===O.nodeName){var H,_=g(N.children);O.append.apply(O,c(_)),null===(H=N.parentElement)||void 0===H||H.removeChild(N)}}else N&&w(N)?(i.innerHTML=L(e.outerHTML,n,"li"),o=i.firstChild,N.insertBefore(o,N.firstElementChild),null==l||l.removeChild(e)):(o=i,i.innerHTML=L(e.outerHTML,n,"li"),null==l||l.replaceChild(o,e))}else i.innerHTML=L(e.outerHTML,n,r),o=i.firstChild,null==l||l.replaceChild(o,e);return o}return i.append(e.cloneNode(!0)),null==l||l.replaceChild(i,e),i},x=function(){function e(t){var n;a(this,e),v(this,"rootElement",void 0),v(this,"timer",void 0),this.rootElement=t,this.timer=null;var r=t.lastElementChild;r&&this.setRange(r,null===(n=r.textContent)||void 0===n?void 0:n.length)}return s(e,[{key:"getRange",value:function(){try{var e;return null===(e=window.getSelection())||void 0===e?void 0:e.getRangeAt(0)}catch(e){}return new Range}},{key:"_getLastNode",value:function(e){for(var t=e;t.lastChild;)t=t.lastChild;return t}},{key:"setRange",value:function(e,t){var n=this.getRange(),r=window.getSelection();r&&r.removeAllRanges();var o,i,l=this._getLastNode(e);void 0===t&&(t=null!==(o=null===(i=l.textContent)||void 0===i?void 0:i.length)&&void 0!==o?o:0);n.setStart(l,t),n.collapse(!0),this._clearTimeout(),this.timer=setTimeout((function(){null==r||r.addRange(n)}),100)}},{key:"_clearTimeout",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"getCurrentNode",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getRange(),n=t.endContainer;n&&this.rootElement!==n;){var r;if(!e&&"LI"===n.nodeName&&(null===(r=n.parentElement)||void 0===r?void 0:r.parentElement)===this.rootElement)return n;if(n.parentElement===this.rootElement)return n;n=n.parentNode}return this.rootElement.lastElementChild}}]),e}(),j=function(){function e(){a(this,e),v(this,"eventList",void 0),this.eventList={}}return s(e,[{key:"on",value:function(e,t){e&&t&&"function"==typeof t&&(this.eventList[e]||(this.eventList[e]=[]),this.eventList[e].push(t))}},{key:"emit",value:function(e){var t=this.eventList[e];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)try{t[i].apply(null,r)}catch(e){this.emit("error",e,"emit")}}}},{key:"off",value:function(e,t){if(this.eventList[e]){var n=this.eventList[e];if("function"==typeof t){var r=n.findIndex((function(e){return e===t}));r>=0&&n.splice(r,1)}else this.eventList[e].length=0;this._removeEmpty(e)}}},{key:"_removeEmpty",value:function(e){this.eventList[e].length||delete this.eventList[e]}},{key:"destroyEventEmitter",value:function(){var e=this;Object.keys(this.eventList).forEach((function(t){return e.off(t)}))}}]),e}(),$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}(o,e);var t=r(o);function o(e,n){var r;if(a(this,o),v(i(r=t.call(this)),"$wrapper",void 0),v(i(r),"version",void 0),v(i(r),"options",void 0),v(i(r),"$editor",void 0),v(i(r),"$content",void 0),v(i(r),"cursor",void 0),v(i(r),"_contentEvent",void 0),v(i(r),"allowedNodeNames",void 0),!(i(r)instanceof o))throw new Error("ZxEditor is a constructor and should be called with the `new` keyword");var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e instanceof HTMLElement?e:t.querySelector(e)}(e);if(!l)throw new Error("Can't found '".concat(e,"' Node in document!"));return r.$wrapper=l,r.version="3.1.0",r.options=d(d({},H),n),r.allowedNodeNames=(r.options.allowedNodeNames||N).map((function(e){return e.toUpperCase()})),r.$content=function(e){var t=d({lineHeight:e.lineHeight,minHeight:e.minHeight,position:"relative",overflowY:"scroll",outline:"none"},e.styles);e.caretColor&&(t.caretColor=e.caretColor),e.textColor&&(t.color=e.textColor);var n={class:"".concat("zx-editor-content-wrapper"," is-empty"),style:C(t)};e.editable&&(n.contenteditable="true");var r=E("div",n);return r.innerHTML="<section><br></section>",r}(r.options),r.$editor=E("div",{class:"zx-editor"}),r.$editor.append(r.$content),r.$wrapper.append(r.$editor),r.cursor=new x(r.$content),r._contentEvent=function(e){var t=e.type;"blur"===t&&r._lastLine(),r.emit("input"===t?"change":t,e)},r._initEvents(),r}return s(o,[{key:"_initEvents",value:function(){this.$content.addEventListener("focus",this._contentEvent),this.$content.addEventListener("blur",this._contentEvent),this.$content.addEventListener("input",this._contentEvent)}},{key:"use",value:function(e){"function"==typeof e.install&&e.install(this)}},{key:"plugin",value:function(e){"function"==typeof e&&e.call(this)}},{key:"setHtml",value:function(e){this.$content.innerHTML="",this.insert(e),this._lastLine()}},{key:"getHtml",value:function(){return this.$content.innerHTML.replace(/<section><br><\/section>$/,"")}},{key:"insert",value:function(e){var t=this;if(e instanceof HTMLElement)this._insert(e);else{var n=E("div");n.innerHTML=e,g(n.childNodes).forEach((function(e){e.nodeType===Node.ELEMENT_NODE?"BR"===e.nodeName?t._insert(E(S,{},"<br/>")):t._insert(e):e.textContent&&t._insert(E(S,{},e.textContent))}))}}},{key:"_insert",value:function(e){var t=this.cursor.getCurrentNode();t?O(t)?this.$content.insertBefore(e,t):this.$content.insertBefore(e,t.nextElementSibling):this.$content.append(e),this.allowedNodeNames.includes(e.nodeName)||(e=_(e,S)),this.$content.dispatchEvent(new InputEvent("input")),this.cursor.setRange(e)}},{key:"_lastLine",value:function(){O(this.$content.lastElementChild)||this.$content.appendChild(E("section",{},"<br>"))}},{key:"changeNodeName",value:function(e){if(!this.allowedNodeNames.includes(e.toUpperCase()))return!1;var t=this.cursor.getCurrentNode();return!(!t||!_(t,e))}},{key:"changeStyles",value:function(e,t){var n=this.cursor.getCurrentNode(!0);if(n){var r="string"==typeof e?v({},e,t):e;n.setAttribute("style",C((n.getAttribute("style")||"").split(/\s?;\s?/).reduce((function(e,t){var n=p(t.split(/\s?:\s?/),2),r=n[0],o=n[1];return e[b(r)]=o,e}),{}),r))}}},{key:"destroy",value:function(){this.$content.removeEventListener("focus",this._contentEvent),this.$content.removeEventListener("blur",this._contentEvent),this.$content.removeEventListener("input",this._contentEvent),this.destroyEventEmitter()}}]),o}(j);t.ZxEditor=$}));
//# sourceMappingURL=zx-editor.min.js.map
