function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.unknown=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(t){function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}
/*!
   * zx-editor v3.1.0
   * https://github.com/capricorncd/zx-editor
   * Released under the MIT License
   * Released on: Sun May 08 2022 17:06:00 GMT+0900 (Japan Standard Time)
   * Copyright Â© 2018-present, capricorncd
   */(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.ZxEditor=void 0;var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return"".concat(t).concat(e.toLowerCase())}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(e,t)},m={editable:!0,minHeight:"50vh",placeholder:"Enter...",placeholderColor:"",lineHeight:1.5,caretColor:"",textColor:"",cursorOffsetTop:30,customPasteHandler:void 0,toolbarBeenFixed:!0,toolbarHeight:50,toolbarButtons:["select-picture","text-style"],imageMaxWidth:720,imageMaxSize:20480,imageSectionTemp:'<section class="child-is-picture"><img src="{url}" loading="lazy"></section>',ignoreGif:!0,forceImageResize:!1,textStyleTitle:"Set Style",textStyleHeadLeftBtnText:"Clear style",textStyleHeadAlign:"center",mainColor:"",borderColor:""},g="SECTION",b=["DIV","P","ARTICLE","ASIDE","DETAILS","FOOTER","HEADER","MAIN","NAV"],E=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=document.createElement(e),o=0,i=Object.entries(t);o<i.length;o++){var c=v(i[o],2),l=c[0],s=c[1];r.setAttribute(l,s)}return n&&(r.innerHTML=n),r},w=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=v(r[n],2),i=o[0],c=o[1];t.push("".concat(p(i),":").concat(c))}return t.join(";")},O=function(e,t,n){return e.replace(RegExp("(^<"+t+")|("+t+">$)","gi"),(function(e){return e.toUpperCase().replace(t,n.toLowerCase())}))},L=function(e){if(!e)return!1;var t=y(e.childNodes);return 1===t.length&&"BR"===t[0].nodeName},C=function(){function e(t){u(this,e),h(this,"rootElement",void 0),h(this,"selection",void 0),h(this,"range",void 0),h(this,"timer",void 0),this.rootElement=t,this.selection=window.getSelection(),this.range=this.selection?this.selection.getRangeAt(0):new Range,this.timer=null;var n,r=t.lastElementChild;r&&this.setRange(r,null===(n=r.textContent)||void 0===n?void 0:n.length)}return f(e,[{key:"setRange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.selection&&this.selection.removeAllRanges();var r=e.childNodes[e.childNodes.length-1]||e;/IMG|VIDEO|AUDIO/.test(r.nodeName)&&(n=1,r=r.parentNode),this.range.setStart(r,n),this.range.collapse(!0),this._clearTimeout(),this.timer=setTimeout((function(){var e;null===(e=t.selection)||void 0===e||e.addRange(t.range)}),100)}},{key:"_clearTimeout",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"getCurrentNode",value:function(){this.range=this.selection?this.selection.getRangeAt(0):new Range;for(var e=this.range.endContainer;this.rootElement!==e;){if(e.parentElement===this.rootElement)return e;e=e.parentNode}return this.rootElement.lastElementChild}}]),e}(),_=function(){function e(){u(this,e),h(this,"eventList",void 0),this.eventList={}}return f(e,[{key:"on",value:function(e,t){e&&t&&"function"==typeof t&&(this.eventList[e]||(this.eventList[e]=[]),this.eventList[e].push(t))}},{key:"emit",value:function(e){var t=this.eventList[e];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)try{t[i].apply(null,r)}catch(e){this.emit("error",e,"emit")}}}},{key:"off",value:function(e,t){if(this.eventList[e]){var n=this.eventList[e];if("function"==typeof t){var r=n.findIndex((function(e){return e===t}));r>=0&&n.splice(r,1)}else this.eventList[e].length=0;this._removeEmpty(e)}}},{key:"_removeEmpty",value:function(e){this.eventList[e].length||delete this.eventList[e]}},{key:"destroyEventEmitter",value:function(){var e=this;Object.keys(this.eventList).forEach((function(t){return e.off(t)}))}}]),e}(),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}(o,e);var t=r(o);function o(e,n){var r;if(u(this,o),h(i(r=t.call(this)),"$wrapper",void 0),h(i(r),"version",void 0),h(i(r),"options",void 0),h(i(r),"$editor",void 0),h(i(r),"$content",void 0),h(i(r),"cursor",void 0),h(i(r),"_contentEvent",void 0),!(i(r)instanceof o))throw new Error("ZxEditor is a constructor and should be called with the `new` keyword");var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e instanceof HTMLElement?e:t.querySelector(e)}(e);if(!c)throw new Error("Can't found '".concat(e,"' Node in document!"));return r.$wrapper=c,r.version="3.1.0",console.log(r.version),r.options=s(s({},m),n),r.$content=function(e){var t=s({lineHeight:e.lineHeight,minHeight:e.minHeight,position:"relative",overflowY:"scroll",outline:"none"},e.styles);e.caretColor&&(t.caretColor=e.caretColor),e.textColor&&(t.color=e.textColor);var n={class:"".concat("zx-editor-content-wrapper"," is-empty"),style:w(t)};e.editable&&(n.contenteditable="true");var r=E("div",n);return r.innerHTML="<section><br></section>",r}(r.options),r.$editor=E("div",{class:"zx-editor"}),r.$editor.append(r.$content),r.$wrapper.append(r.$editor),r.$content.focus(),r.cursor=new C(r.$content),r._contentEvent=function(e){var t=e.type;"blur"===t&&r._lastLine(),r.emit("input"===t?"change":t,e)},r._initEvents(),r}return f(o,[{key:"_initEvents",value:function(){this.$content.addEventListener("focus",this._contentEvent),this.$content.addEventListener("blur",this._contentEvent),this.$content.addEventListener("input",this._contentEvent)}},{key:"use",value:function(e){"function"==typeof e.install&&e.install(this)}},{key:"plugin",value:function(e){"function"==typeof e&&e.call(this)}},{key:"setHtml",value:function(e){this.$content.innerHTML="",this.insert(e),this._lastLine()}},{key:"getHtml",value:function(){return this.$content.innerHTML.replace(/<section><br><\/section>$/,"")}},{key:"insert",value:function(e){var t=this;if(e instanceof HTMLElement)this._insert(e);else{var n=E("div");n.innerHTML=e,y(n.childNodes).forEach((function(e){e.nodeType===Node.ELEMENT_NODE?"BR"===e.nodeName?t._insert(E(g,{},"<br/>")):t._insert(e):e.textContent&&t._insert(E(g,{},e.textContent))}))}}},{key:"_insert",value:function(e){console.log(e);var t=this.cursor.getCurrentNode();t?L(t)?this.$content.insertBefore(e,t):this.$content.insertBefore(e,t.nextElementSibling):this.$content.append(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=e.nodeName,r=t.toUpperCase();if(n===r)return e;var o=E(t),i=e.parentElement;b.includes(n)?(o.innerHTML=O(e.outerHTML,n,r),null==i||i.replaceChild(o.firstChild,e),o.firstChild):(o.append(e.cloneNode(!0)),null==i||i.replaceChild(o,e))}(e,g)}},{key:"_lastLine",value:function(){L(this.$content.lastElementChild)||this.$content.appendChild(E("section",{},"<br>"))}},{key:"destroy",value:function(){this.$content.removeEventListener("focus",this._contentEvent),this.$content.removeEventListener("blur",this._contentEvent),this.$content.removeEventListener("input",this._contentEvent),this.destroyEventEmitter()}}]),o}(_);t.ZxEditor=x}));
//# sourceMappingURL=zx-editor.min.js.map
